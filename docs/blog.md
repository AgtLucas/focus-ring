# Input Modality - `:focus`'ing on users
Throughout the history of Web development, we're always trying to find ways to make the user experience better while maintaining a 'works for everyone' approach.  Early on, CSS had a concept called a [Media Sheet](http://www.w3.org/TR/2011/REC-CSS2-20110607/media.html#media-sheets) which allowed us to express that this stylesheet (or these styles) were for print media, while that this other one over here was for users viewing on a screen.  

Later, as the ways in which users interacted became more varied than initially considered, it became evident that by just knowing a little bit more about the device, we could do much better and something more advanced was introduced in [CSS Media Queries Level 3](http://www.w3.org/TR/css3-mediaqueries/) which allowed authors to write things in a much more targeted fashion based on not just the media, but things about the media - like it's size and whether or not it supported color.  From this, the modern Responsive Web movement was born and it's inarguably improved things.

Now, we find ourselves in a similar place, but from a different direction:  Knowing how a particular user actually _interacts_ with content matters.  To illustrate: Consider the humble focus ring.

## The Focus Ring
Many people take the focus ring for granted, we just notice it now and then.  It's subtle, but it plays an important role.  For keyboard users it's absolutely critical in understanding what to expect, but actually they're not the only ones.  To illustrate the real role of the ring, imagine for a moment the common experience of pulling up something like Twitter in a Web browser, on your cell phone - you are taken promptly to a login page where you see two fields asking for your username and password.  Clicking on one of those fields does several important things, but there's two we want to examine: a) it enables a keyboard display so that a user can provide the value and, importantly b) _it shows the focus ring on the field where those characters are about to land_.   This statment is true regarless of the device that you are using because the _only_ way to interact with that element is to type some text.   Now imagine the same situation on a desktop - a keyboard oriented user can hit the `tab` key to navigate sequentially through important the fields and the way that you understand 'which' thing you are on (and thus how you might potentially interact with it via the keyboard) is indicated via the focus ring.

These are very, very important things so it's tempting to over-simplify wave our hands and call it "done" and think that all we need to do is say "when a thing has focus it should get the focus ring indicator".  Of course, designs vary so what the particular focus ring should look like could vary too, so we need CSS support to customize it:  On a white page background, a light blue outline might be really appropriate - but if your interface _is_light blue, you might need to consider this in your branding and perhaps provide something as simple as:

```css
:focus { outline: 3px solid green; }
```

Simple, right?  Unfortunately, not really...

## The Fly in the Ointment
The focus ring has been around for a long, long time.  We know, probably intuitively, that very many users either don't use the keyboard to interact unless they have to type.  Some of us also know, from data and experience, that that little rectangle is occasionally annoying, ugly and, worse, sometimes actively confusing when the user is navigating to something via a mouse.  Try adding a global focus rule like the one above and use the UI for a bit.  If you're using a mouse, it can be pretty disconcerting and unpleasant sometimes.  Since we know the focus ring is there natively in the situation above, why is it so disconcerting with a global rule in place?  Many authors will therefore avoid the global :focus rule and instead target it very specifically at elements imagining that this solves their problem.  However, if a user's means of understanding where they are at during keyboard navigation requires a visible queue, they've now been left out in the cold when they encounter elements that have the focus but no indicator.

There's a fly in the ointment here, but where?  To answer this, think back our login form: Did the submit button light up when you pressed it?  Technically it had focus for any time the subsequent submission was taking place, but if you clicked it with a mouse (as many probably did), it did not get the focus ring.  As it turns out, there's more to it.  Users (and businesses) frequently find a focus ring less than visually desirable (like when a button is clicked with a mouse or touched). Because of this, browsers tend to treat some elements differently (natively) based on whether a user reached them via keyboard or otherwise and this isn't a new thing, it's got a long history. Browsers [have been experimenting](https://bugzilla.mozilla.org/show_bug.cgi?id=377320) with variations of this since at least IE7.  Again, since you are statistically likely to be in the group where the focus ring is a subtle benefit you've probably never even consciously noticed the differences but they're there:  Landing on a text `<input>` will pretty much always yield a focus ring regardless of how you get there, but a `<button>,` `<input type="checkbox">` for example will not will often only show the focus ring if you've actually used the keyboard to get there (implmentations vary, but the idea is consistent).  This is great for users like me who do both: If I press tab/shift+tab I'm going to indicate that I'm using the keyboard and I'll see the focus ring, if not, I'll only see it if it is very likely that my next move is to use it (for example, to enter text in a text field).  We have 8+ years of experimentation and data and it seems fairly obvious that in some cases you can improve the experience for everyone by knowing a little bit about how they are using it.


When to show the focus ring is merely one case, where this idea of understanding how the user is using the UI and adapting appropriately matters, but it's an important one and it's long been a problem.  Unfortutately, while there is some similar concept "down there" on how to handle this, there is no standard.  For an author, something like this this is currently laced with competing problems with seemingly no good way to mutually resolve them - each approach involves sacrificing the experience of one for another: Either everything has focus rings because of keyboard accessibility, or nothing has focus rings because of their other users (or business preferences) or some things always have focus while others never have focus.  This says nothing of the problem created for users who utilize both approaches or have multiple possible means of input.

Further, exposing data about what the browser _supports_ won't do it.  The Mac laptop on which I am typing this right now, for example, supports both mouse and keyboard - as do most desktop and laptop devices, but it doesn't tell an author anything about me.  Do you show me the ring or not?  As shown above, natively the answer is "it depends".

What we really want is a way to balance all of these desires and provide really high-quality UX for everyone.  Sadly, the browser doesn't expose information about how the user *can* use an interface, and it *can't* know how a user *will* use an interface if there are multiple options.  So what do we do?  Do we just throw up our hands and say "these are the limitations" - or do we try to do better?

# We can do better: Here's a proposal (and early prototype)
We belive we can do better.  We're proposing an idea called `input-modality` which would expose information to authors and allow them to adapt the interface in the same way that media queries allow authors to adapt to change in screen size.  Simply put, as the user interacts with controls, we know it.  We know what they did (a keypress, a touch, a mouse click) and we know what the target they are interacting with is capable of accepting (do you have to type or don't you).  Using this information, we believe that we can expose via a simple heuristic and allow easy solutions that provide a much better user experience for everyone.

Let's go back to our focus ring example:  What we really want is to say "If someone is interacting via the keyboard, they need a visual indicator of what has focus, but if they are using a touch based device they don't."  If they could express this simply, they might wind up with a rule which expressed something like (note, this example uses an attribute set on the body based on the prollyfill provided which works with today's technology, but the ultimate means of expression is debatable - the important takeaway is that it should be something that captures the simplicity and thrust below):

```css
body:not([input-modality=keyboard]) :focus {
    outline: none;
}
```

A rule like this would allow users of touch devices or mouse oriented users to avoid the focus ring except in cases where the only available or very likely input modality was a keyboard (like `<input type=text>`) while allowing keyboard users to see the focus ring on anything with focus based on the fact that they are using the keyboard.  If a user begins using the mouse, simply pressing tab/shift tab will let them know where they are by shifting the modality back to keyboard.

You can try out a [demo](http://alice.github.io/modality/demo/) of the [prototype prollyfill](https://github.com/alice/modality), or [include it](https://alice.github.io/modality/src/keyboard-modality.js) in your own web page.

Further, it's a more future-friendly idea - there is a way that new or custom elements can indicate that they are keyboard-oriented thing and it is the handshake between how the user is using and an understanding of the element itself that dictate the current modality and therefore allows the author to adjust accordingly, easily.

Please try out the concept and let us know what you think.  If you're interested in this idea and our [https://github.com/alice/modality/blob/master/docs/modality-mq.md](proposal), please join us on [http://discourse.wicg.io/](Specifiction) to discuss.
