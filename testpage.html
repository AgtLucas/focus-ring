<html><head>
    <!-- Original test page written by Dominic Mazzoni -->
    <title>Keyboard-only focus test</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
      div,input,textarea,h1,h2 {
      font-family: arial, sans-serif;
      }
      div { margin: 1em 0; }
      div[role="textbox"] {
      width: 10em;
      min-height: 2em;
      padding: 0.2em;
      border: 1px solid #000;
      }
      label {
      display: block;
      margin: 1em 0;
      }
      select {
      width: 10em;
      }
    </style>
    <script src="keyboard-focus.js"></script>
    <style>
        body[input-modality=keyboard] :focus {
          outline: 2px solid green;
        }

        body:not([input-modality=keyboard]) :focus {
          outline: none;
        }
      </style>
  </head>
  <body>
    <h1>Keyboard-only focus test</h1>
    <p>
      This page contains various html controls and demonstrates a proposal for only drawing a focus ring when the keyboard is being used. You should see a green focus indicator (or comment out green focus ring style to see default focus ring) on elements below differently based on whether you interact with them via keyboard or mouse.  If you are using the mouse and get lost, at any time you can tab/shift-tab to find your focus indicator.
    </p>

    <h2>Rationale</h2>
    <p>
      <ul>
        <li>Many developers disable the focus ring in their CSS styles. This often seems to be a result of finding the focus ring both aesthetically unpleasant and confusing to users when applied after a mouse or touch event.
        <li>It seems evident that what has focus is only interesting to a user who is using the keyboard to interact with the page. A user using any kind of pointing device would only be interested in what is in focus if they were <em>just about</em> to use the keyboard - otherwise, it is irrelevant.
        <li>Thus, if we only show the focus ring when relevant, we can avoid user confusion and avoid creating incentives for developers to disable it.
      </ul>
      Since we can't tell when a user is <em>about</em> to use the keyboard, we use the following heuristic to decide whether to show the focus ring:
        <ul>
          <li>the user has focused something using the keyboard (i.e. pressed <i>Tab</i> or <i>Shift-Tab</i>); or
          <li>the user has focused something which accepts input from a keyboard or IME.
        </ul>
      This means that we don't have full coverage of the case where the user is <em>just about</em> to interact with something using the keyboard and may be wondering where focus is; we suggest that in that case, users who frequently switch modes from the mouse to the keyboard will become accustomed to moving focus forwards and backwards with the keyboard in order to determine its location.
    </p>

    <h2>Implementation</h2>
    <p>
      The logic in <a href="http://alice.github.io/point-focus/keyboard-focus.js">keyboard-focus.js</a> sets an <code>input-modality</code> attribute on <code>body</code> if either of the above heuristics are met. The style for this page includes the following block, which disables the focus ring <em>unless</em> <code>input-modality</code> is set to <code>keyboard</code>:
      <pre>
        body:not([input-modality=keyboard]) :focus {
          outline: none;
        }
      </pre>
    </p>

    <h2>Proposals</h2>
    <p>
      <ul>
        <li>Strong version: <code>:focus</code> selector should only be matched when the user is using the keyboard, as determined by something like the above heuristic.
        <li>Weak version: the <em>focus ring</em> should only be shown when the user is using the keyboard; <code>:focus</code> should match whenever an element is focused.
      </ul>
      A version of the latter is implied by the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/%3A-moz-focusring"><code>:-moz-focusring</code></a> implementation. This allows a developer to specify one style when the user agent determines that the focus ring should be drawn (although this selector doesn't imply a focus ring per se), and another style which applies any time the element is focused.
    </p>
    <p>
      Note that these proposals don't require the use of an <code>input-modality</code> attribute - this is just an implementation detail for this demo. However, a complete proposal <em>should</em> include a mechanism for custom elements to declare to the user agent that it should always get a focus ring. This could be
      <ul>
        <li><strong>explicit</strong>: an attribute, property or method allowing the element to state that it should always have a focus ring (or match a <code>:focus</code> style) when focused, or
        <li><strong>implicit</strong>: a mechanism for a custom element to state that it will take some kind of input from a keyboard or IME. (This demo's <code>input-modality</code> attribute suggests this option.)
      </ul>
    </p>

    <h2>Editable text</h2>
    <div>
      <input placeholder="Single line">
    </div>
    <div>
      <textarea placeholder="Multi line"></textarea>
    </div>
    <div>
      <div id="s" role="textbox" tabindex="0" contenteditable="true">Contenteditable with textbox role</div>
    </div>
    <h2>Buttons</h2>
    <div>
      <button>Button</button>
    </div>
    <div>
      <button input-modality=keyboard>Button with <code>input-modality=keyboard</code></button>
    </div>
    <div>
      <input type="submit" value="Submit button">
    </div>
    <div>
      <label><input type="checkbox">Checkbox</label>
    </div>
    <div>
      <label><input name="a" type="radio">Radio 1</label>
      <label><input name="a" type="radio">Radio 2</label>
    </div>
    <h2>Selects</h2>
    <label>Select one from drop-down:<br>
      <select>
        <option>Apple</option>
        <option>Orange</option>
        <option>Banana</option>
      </select>
    </label>
    <label>Select one from list:<br>
      <select size="5">
        <option>Apple</option>
        <option>Orange</option>
        <option>Banana</option>
      </select>
    </label>
    <label>Select multiple:<br>
      <select multiple="">
        <option>Apple</option>
        <option>Orange</option>
        <option>Banana</option>
      </select>
    </label>
    <h2>Other</h2>
    <label>Process nice score from -20 to +20:<br>
      <input type="range" min="-20" max="20" value="0">
    </label>
    <label>Bowling score from 0 to 300:<br>
      <input type="range" min="0" max="300" value="0">
    </label>
    <div>
      <input type="date" value="2008-09-01">
    </div>
    <div>
      <input type="time" value="00:00:00">
    </div>
    <div>
      <input type="number" placeholder="Number">
    </div>
    <div>
      <input type="color" title="Color" value="#00ff00">
    </div>
    <div>
      <input type="file" title="File">
    </div>


  </body>
</html>
